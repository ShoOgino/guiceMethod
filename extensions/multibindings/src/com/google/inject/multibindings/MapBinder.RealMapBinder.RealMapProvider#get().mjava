      @Override public Map<K, V> get() {
        Map<K, V> map = new LinkedHashMap<K, V>();
        for (Entry<K, Provider<V>> entry : mapProvider.get().entrySet()) {
          V value = entry.getValue().get();
          K key = entry.getKey();
          checkConfiguration(value != null,
              "Map injection failed due to null value for key \"%s\"", key);
          map.put(key, value);
        }
        return Collections.unmodifiableMap(map);
      }

