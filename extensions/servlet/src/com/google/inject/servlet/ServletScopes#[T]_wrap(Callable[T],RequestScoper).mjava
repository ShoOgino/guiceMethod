  private static final <T> Callable<T> wrap(
      final Callable<T> delegate, final RequestScoper requestScoper) {
    return () -> {
      RequestScoper.CloseableScope scope = requestScoper.open();
      try {
        return delegate.call();
      } finally {
        scope.close();
      }
    };
  }

