  public void testMalformedBindConstantCommands() {
    CommandRecorder recorder = new CommandRecorder(earlyRequestProvider);

    recorder.recordCommands(new AbstractModule() {
      protected void configure() {
        AnnotatedConstantBindingBuilder cbb = bindConstant();
        cbb.annotatedWith(SampleAnnotation.class);
        try {
          cbb.annotatedWith(Names.named("A"));
          fail();
        } catch(IllegalStateException expected) {
        }
      }
    });

    recorder.recordCommands(new AbstractModule() {
      protected void configure() {
        ConstantBindingBuilder cbb = bindConstant().annotatedWith(SampleAnnotation.class);
        cbb.to("A");
        try {
          cbb.to("B");
          fail();
        } catch(IllegalStateException expected) {
        }
      }
    });
  }

