  @Test
  public void providedValue_gotUnexpected_expectFailure() {
    String expected = "keep Summer safe";
    String unexpected = "Summer is unsafe";
    CheckedProvider<String> provider = CheckedProviders.of(StringCheckedProvider.class, unexpected);
    String transitionMessage =
        String.format(
            "value provided by <%s>\nNot true that <%s> is equal to <%s>",
            getReturningProviderName(unexpected), unexpected, expected);
    String oldMessage = transitionMessage.replaceFirst("\n", ": ");
    String newMessage =
        String.format(
            "value provided by <%s>\nexpected: %s\nbut was : %s",
            getReturningProviderName(unexpected), expected, unexpected);

    expectWhenTesting().that(provider).providedValue().isEqualTo(expected);
    assertThat(expect.getFailure())
        .hasMessageThat()
        .isAnyOf(oldMessage, transitionMessage, newMessage);
  }

