  public void testFactoryUseBeforeInitialization() {
    ColoredCarFactory carFactory = Factories.create(ColoredCarFactory.class, Subaru.class);
    try {
      carFactory.create(Color.RED);
      fail();
    } catch (IllegalStateException expected) {
      assertContains(expected.getMessage(),
          "Factories.create() factories cannot be used until they're initialized by Guice.");
    }
  }

