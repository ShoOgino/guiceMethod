  public static Test suite() {
    SecurityManager securityManager = new SecurityManager() {
      @Override public void checkPermission(Permission permission) {
        if (permission instanceof FilePermission
            || permission instanceof PropertyPermission) {
          return; // avoid creating a stacktrace for common permissions
        }

        String stacktrace = Arrays.toString(new Throwable().getStackTrace());
        if (stacktrace.contains("Thread.<init>")
            || stacktrace.contains(".getSystemClassLoader(")) {
          throw new AccessControlException("StrictContainerTestSuite forbids this!");
        }
      }

      @Override public void checkPermission(Permission permission, Object context) {
        checkPermission(permission);
      }
    };

    StrictContainerTestSuiteBuilder builder = new StrictContainerTestSuiteBuilder(securityManager);
    /*if[AOP]*/
    builder.add(BytecodeGenTest.class.getName());
    /*end[AOP]*/
    builder.addSuite(MapMakerTestSuite.class.getName());

    return SuiteUtils.removeSuppressedTests(builder.build(), SUPPRESSED_TEST_NAMES);
  }

