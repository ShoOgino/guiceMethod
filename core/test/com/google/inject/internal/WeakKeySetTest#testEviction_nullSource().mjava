  public void testEviction_nullSource() {
    TestState state = new TestState();
    Key<Integer> key = Key.get(Integer.class);
    Object source = null;
    
    WeakReference<Key<Integer>> weakKeyRef = new WeakReference<Key<Integer>>(key);

    set.add(key, state, source);
    assertTrue(set.contains(key));
    assertEquals(1, set.getSources(key).size());
    assertTrue(set.getSources(key).contains(source));

    state = null;

    GcFinalization.awaitFullGc();

    assertFalse(set.contains(Key.get(Integer.class)));
    assertNull(set.getSources(Key.get(Integer.class)));

    // Ensure there are no hanging references.
    key = null;
    GcFinalization.awaitClear(weakKeyRef);
  }

