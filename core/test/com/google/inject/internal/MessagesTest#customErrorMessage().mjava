  @Test
  public void customErrorMessage() {
    List<Message> messages = new ArrayList<>();
    List<Object> sources = ImmutableList.of();
    Throwable cause = null;
    messages.add(new Message("example", cause));
    messages.add(new Message(ErrorId.OTHER, new ExampleErrorDetail("a", sources, cause)));
    messages.add(new Message(ErrorId.OTHER, new ExampleErrorDetail("b", sources, cause)));
    messages.add(new Message(ErrorId.OTHER, new ExampleErrorDetail("a", sources, cause)));

    String result = Messages.formatMessages("Example", messages);

    assertThat(result)
        .isEqualTo("Example:\n\n1) example\n\n2) a (count: 2)\n3) b (count: 1)\n3 errors");
  }

