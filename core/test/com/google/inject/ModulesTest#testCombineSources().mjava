  /**
   * The module returned by Modules.combine shouldn't show up in binder sources.
   */
  public void testCombineSources() {
    Module skipSourcesModule = new AbstractModule() {
      @Override protected void configure() {
        install(Modules.combine(newModule(1), newModule(2L)));
      }
    };
    Injector injector = Guice.createInjector(Modules.combine(skipSourcesModule));
    ElementSource source = (ElementSource) injector.getBinding(Integer.class).getSource();
    // Check modules stack
    assertEquals(source.getModuleClassNames().size(), 4);
    assertEquals(ImmutableList.of("com.google.inject.ModulesTest$2",
        "com.google.inject.util.Modules$2", "com.google.inject.ModulesTest$1",
        "com.google.inject.util.Modules$2"), source.getModuleClassNames());
    StackTraceElement stackTraceElement = (StackTraceElement) source.getDeclaringSource();
    assertEquals(skipSourcesModule.getClass().getName(), stackTraceElement.getClassName());
  }

