  InheritingState(Optional<State> parent) {
    this.parent = parent;
    this.lock = parent.isPresent() ? parent.get().lock() : this;
  }

