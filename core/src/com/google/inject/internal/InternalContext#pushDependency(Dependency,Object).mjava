  /** Sets the new current dependency & adds it to the state. */
  public Dependency pushDependency(Dependency dependency, Object source) {
    Dependency previous = this.dependency;
    this.dependency = dependency;
    state.addLast(new DependencyAndSource(dependency, source));
    return previous;
  }

