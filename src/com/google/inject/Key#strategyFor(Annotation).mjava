  /**
   * Gets the strategy for an annotation.
   */
  static AnnotationStrategy strategyFor(Annotation annotation) {
    nonNull(annotation, "annotation");
    Class<? extends Annotation> annotationType = annotation.annotationType();
    ensureRetainedAtRuntime(annotationType);
    return isMarker(annotationType)
        ? new AnnotationTypeStrategy(annotationType, annotation)
        : new AnnotationInstanceStrategy(annotation);
  }

