  /**
   * The given annotation may be an instance of {@code Scoped} or it may be
   * annotated with {@code Scoped}.
   */
  static Scoped findScoped(Annotation annotation) {
    Class<? extends Annotation> annotationType = annotation.annotationType();
    return annotationType == Scoped.class
        ? (Scoped) annotation
        : annotationType.getAnnotation(Scoped.class);
  }

