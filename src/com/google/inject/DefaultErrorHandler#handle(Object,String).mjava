  public void handle(Object source, String message) {
    source = ErrorMessages.convert(source);

    if (state == State.RUNTIME) {
      throw new ConfigurationException("Error at " + source + " " + message);

    } else if (state == State.CONFIGURATION_TIME) {
      errorMessages.add(new Message(source, message));

    } else {
      throw new AssertionError();
    }
  }

