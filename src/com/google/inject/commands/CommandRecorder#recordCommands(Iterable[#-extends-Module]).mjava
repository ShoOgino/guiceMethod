  /**
   * Records the commands executed by {@code modules}.
   */
  public List<Command> recordCommands(Iterable<? extends Module> modules) {
    RecordingBinder binder = new RecordingBinder();
    for (Module module : modules) {
      binder.install(module);
    }
    return Collections.unmodifiableList(binder.commands);
  }

