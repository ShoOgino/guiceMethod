  /**
   * Sets the default source, runs the given command, and then
   * restores the previous default source provider.
   */
  public static void withDefault(
      final Object source, Runnable r) {
    withDefault(new SourceProvider() {
      public Object source() {
        return source;
      }
    }, r);
  }

