  /**
   * Sets the actual provider.
   *
   * @param delegate provider
   * @throws IllegalStateException if the delegate is already set
   * @throws NullPointerException if the delegate is null
   */
  public void initializeDelegate(Provider<T> delegate) {
    checkState(this.delegate == null, "delegate already initialized");
    checkNotNull(delegate, "delegate");
    this.delegate = delegate;
  }

