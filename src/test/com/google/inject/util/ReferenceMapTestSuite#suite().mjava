  public static Test suite() {
    TestSuite suite = new TestSuite();

    Set<ReferenceType> referenceTypes =
        new HashSet<ReferenceType>();
    referenceTypes.addAll(Arrays.asList(ReferenceType.values()));
    referenceTypes.remove(ReferenceType.PHANTOM);

    // create test cases for each key and value type.
    for (Method method : MapTest.class.getMethods()) {
      String name = method.getName();
      if (name.startsWith("test")) {
        for (ReferenceType keyType : referenceTypes) {
          for (ReferenceType valueType : referenceTypes) {
            suite.addTest(new MapTest(name, keyType, valueType));
          }
        }
      }
    }

    return suite;
  }

