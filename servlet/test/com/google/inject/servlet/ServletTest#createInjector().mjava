  private Injector createInjector() throws CreationException {
    return Guice.createInjector(new AbstractModule() {
      protected void configure() {
        install(new ServletModule());
        bind(InSession.class);
        bind(InRequest.class);
        bind(nullRequestKey).toProvider(new NullThenNonNullProvider()).in(RequestScoped.class);
        bind(nullSessionKey).toProvider(new NullThenNonNullProvider()).in(SessionScoped.class);
      }
    });
  }

