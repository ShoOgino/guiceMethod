  public void testNewRequestObject() throws Exception {
    expect(request.getAttribute(requestKey.toString())).andReturn(null);
    request.setAttribute(eq(requestKey.toString()), isA(InRequest.class));

    filterChain = new FilterChain() {
      public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse) {
        invoked = true;
        assertSame(request, servletRequest);
        assertNotNull(injector.getInstance(InRequest.class));
      }
    };

    replayFilterAndVerify();
  }

