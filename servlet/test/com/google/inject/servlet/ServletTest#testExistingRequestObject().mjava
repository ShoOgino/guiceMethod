  public void testExistingRequestObject() throws Exception {
    final InRequest inRequest = new InRequest();
    expect(request.getAttribute(requestKey.toString())).andReturn(inRequest).times(2);

    filterChain = new FilterChain() {
      public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse) {
        invoked = true;
        assertSame(request, servletRequest);
        assertSame(inRequest, injector.getInstance(InRequest.class));
        assertSame(inRequest, injector.getInstance(InRequest.class));
      }
    };

    replayFilterAndVerify();
  }

