  public void testFactoryMethods() throws ContainerCreationException {
    Singleton singleton = new Singleton();
    Singleton other = new Singleton();

    ContainerBuilder builder = new ContainerBuilder();
    builder.bind(Singleton.class).to(singleton);
    builder.bind(Singleton.class)
        .annotatedWith(Other.class)
        .to(other);
    Container container = builder.create(true);

    assertSame(singleton,
        container.getFactory(Key.get(Singleton.class)).get());
    assertSame(singleton, container.getFactory(Singleton.class).get());
    assertSame(singleton,
        container.getFactory(new TypeLiteral<Singleton>() {}).get());
    assertSame(singleton, container.getInstance(Key.get(Singleton.class)));
    assertSame(singleton, container.getInstance(Singleton.class));
    assertSame(singleton,
        container.getInstance(new TypeLiteral<Singleton>() {}));

    assertSame(other,
        container.getFactory(Key.get(Singleton.class, Other.class)).get());
    assertSame(other, container.getFactory(Singleton.class, Other.class).get());
    assertSame(other,
        container.getFactory(new TypeLiteral<Singleton>() {}, Other.class).get());
    assertSame(other, container.getInstance(Key.get(Singleton.class, Other.class)));
    assertSame(other, container.getInstance(Singleton.class, Other.class));
    assertSame(other,
        container.getInstance(new TypeLiteral<Singleton>() {}, Other.class));
  }

