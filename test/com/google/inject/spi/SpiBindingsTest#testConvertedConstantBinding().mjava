  public void testConvertedConstantBinding() {
    Injector injector = Guice.createInjector(new AbstractModule() {
      protected void configure() {
        bindConstant().annotatedWith(Names.named("one")).to("1");
      }
    });

    Binding<Integer> binding = injector.getBinding(Key.get(Integer.class, Names.named("one")));
    assertEquals(Key.get(Integer.class, Names.named("one")), binding.getKey());
    assertContains(binding.getSource().toString(), "SpiBindingsTest.java");
    binding.acceptTargetVisitor(new FailingTargetVisitor<Integer>() {
      @Override public Void visitConvertedConstant(Integer value) {
        assertEquals((Integer) 1, value);
        return null;
      }
    });
  }

