    /**
     * A deserialized map equals original
     */
    public void testSerialization() {
        Jsr166HashMap q = map5();

        try {
            ByteArrayOutputStream bout = new ByteArrayOutputStream(10000);
            ObjectOutputStream out =
                    new ObjectOutputStream(new BufferedOutputStream(bout));
            out.writeObject(q);
            out.close();

            ByteArrayInputStream bin =
                    new ByteArrayInputStream(bout.toByteArray());
            ObjectInputStream in =
                    new ObjectInputStream(new BufferedInputStream(bin));
            Jsr166HashMap r = (Jsr166HashMap) in.readObject();
            assertEquals(q.size(), r.size());
            assertTrue(q.equals(r));
            assertTrue(r.equals(q));
        } catch (Exception e) {
            e.printStackTrace();
            unexpectedException();
        }
    }

