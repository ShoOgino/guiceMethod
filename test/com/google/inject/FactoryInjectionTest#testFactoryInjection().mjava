  public void testFactoryInjection() throws ContainerCreationException {
    ContainerBuilder builder = new ContainerBuilder();

    builder.bind(Bar.class);
    builder.bind(ContainerScoped.class).in(Scopes.CONTAINER);

    Container container = builder.create();

    Foo foo = container.getFactory(Foo.class).get();

    Bar bar = foo.barFactory.get();
    assertNotNull(bar);
    assertNotSame(bar, foo.barFactory.get());

    ContainerScoped containerScoped = foo.containerScopedFactory.get();
    assertNotNull(containerScoped);
    assertSame(containerScoped, foo.containerScopedFactory.get());
  }

