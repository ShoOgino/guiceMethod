  public void testIndirectViolation() {
    Module module = new AbstractModule() {
      protected void configure() {
        bind(Style.class).in(Seasonally.class);
        bind(Shirt.class).in(Annually.class);
      }
    };

    ScopeChecker scopeChecker = new ScopeChecker(Guice.createInjector(scopesModule, module));
    try {
      scopeChecker.check(Annually.class, Seasonally.class, Daily.class);
      fail();
    } catch (ConfigurationException expected) {
      assertContains(expected.getMessage(),
          "1) Illegal scoped dependency: " + Shirt.class.getName() + " in @Annually",
          "  depends on " + SleeveLength.class.getName(),
          "  depends on " + Style.class.getName() + " in @Seasonally");
    }
  }

