  public void testIntegration() throws ContainerCreationException {
    CountingInterceptor counter = new CountingInterceptor();

    ContainerBuilder containerBuilder = new ContainerBuilder();
    containerBuilder.bind(Foo.class);
    containerBuilder.intercept(any(), any(), counter);
    Container container = containerBuilder.create(false);

    Foo foo = container.getFactory(Key.get(Foo.class)).get();
    foo.foo();
    assertTrue(foo.invoked);
    assertEquals(1, counter.count);

    foo = container.getFactory(Foo.class).get();
    foo.foo();
    assertTrue(foo.invoked);
    assertEquals(2, counter.count);
  }

