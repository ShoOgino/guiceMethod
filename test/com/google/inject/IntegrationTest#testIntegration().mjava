  public void testIntegration() throws CreationException {
    CountingInterceptor counter = new CountingInterceptor();

    BinderImpl binder = new BinderImpl();
    binder.bind(Foo.class);
    binder.bindInterceptor(any(), any(), counter);
    Injector injector = binder.createInjector();

    Foo foo = injector.getProvider(Key.get(Foo.class)).get();
    foo.foo();
    assertTrue(foo.invoked);
    assertEquals(1, counter.count);

    foo = injector.getProvider(Foo.class).get();
    foo.foo();
    assertTrue(foo.invoked);
    assertEquals(2, counter.count);
  }

